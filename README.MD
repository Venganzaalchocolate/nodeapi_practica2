# Pr√°ctica WEB-API/Node.js/MongoDB

Desarrollar el API que se ejecutar√° en el servidor de un servicio de venta de art√≠culos de
segunda mano llamado Nodepop.

El servicio mantiene anuncios de compra o venta de art√≠culos y permite buscar como poner
filtros por varios criterios.

Cada anuncio tiene los siguientes datos:
- Nombre del art√≠culo, un anuncio siempre tendr√° un solo art√≠culo
- Si el art√≠culo se vende o se busca
- Precio. 
- Foto del art√≠culo. Cada anuncio tendr√° solo una foto.
- Tags del anuncio: work, lifestyle, motor y mobile

# Pr√°ctica WEB-API/Node.js/MongoDB AVANZADO



## Comenzando üöÄ

- Clona el repositorio:  

HTTPS:  
`git clone https://github.com/Venganzaalchocolate/nodeapi.git`  

SSH:  
`git clone git@github.com:Venganzaalchocolate/nodeapi.git`  

### Pre-requisitos üìã  

Tener instalado:

- MongoDB  
- Node  

### Instalaci√≥n üîß

Debes estar dentro de la carpeta nodepop.

Instalar dependencias:  
`npm install`  

Inicializar Base de Datos con 6 anuncios de prueba y un usuario para poder facilitar el acceso.
`npm run bd`  
    - Los datos del usuario son:
      - email: user@example.com
      - password: 1234

Iniciar la aplicaci√≥n:  
`npm start`  

El puerto por defecto es el 3000, para cambiarlo solo debes acceder a la carpeta bin en el archivo www.js linea 15  
`var port = normalizePort(process.env.PORT || '3000');`  

## Conexi√≥n a la base de datos

Crear un archivo en la raiz del proyecto .env copiando el contenido de .env.example

En .env.example sustituir la ruta de ejemplo por la que deseas usar


## Rutas ‚öôÔ∏è

Index:
`http://localhost:3000/`
- Una p√°gina (frontend) que muestra una lista de anuncios
- Cada anuncio tendr√° una foto p√∫blica y su correspondiente miniatura tambi√©n publica

Login:
`http://localhost:3000/login`    
- P√°gina frontend para iniciar sesi√≥n    
`http://localhost:3000/api/login`    
- Ruta para realizar peticiones POST al API y poder iniciar sesi√≥n

API:
ATENCI√ìN: Las rutas del API son privadas, se debe tener un token v√°lido para acceder a ellas. Ejemplo: `http://localhost:3000/api/articulos?token=<tokenvalido>)`    

`http://localhost:3000/api/articulos`    
- P√°gina que muestra una lista de anuncios en formato JSON

## Internacionalizaci√≥n

El frontend es multi-idioma, se puede seleccionar Castellano (ES) o Ingl√©s (EN) en la parte superior izquiera y se cambiar√° autom√°ticamente el idioma. 

El idioma por defecto es el Ingl√©s.

### Operaciones que realiza üî©
- Busqueda de anuncios con filtros por:
    - Tag
            - Ejemplo: `http://localhost:3000/api/articulos?tags=motor`
    - Tipo de anuncio (venta o b√∫squeda)
        - Venta: `venta=true` 
        - Busqueda: `venta=false`
            - Ejemplo: `http://localhost:3000/api/articulos?venta=true`
    - Precio
        - Filtrar articulo por precio exacto. `precio=<numero>`
            - Ejemplo: `http://localhost:3000/api/articulos?precio=45`
        - Filtrar articulos con un precio menor que: `precio=<numero>-`
            - Ejemplo: `http://localhost:3000/api/articulos?precio=-200`
        - Filtrar articulos con un precio mayor que: `precio=-<numero>`
            - Ejemplo: `http://localhost:3000/api/articulos?precio=200-`
        - Filtrar articulos conprendido entre: `precio=<numero>-<numero>`
            - Ejemplo: `http://localhost:3000/api/articulos?precio=20-200`

    - Nombre de art√≠culo 
        - Puede contener solo parte del nombre, no distingue entre may√∫sculas y min√∫sculas.  
        `nombre=<nombrearticulo>`
            - Ejemplo: `http://localhost:3000/api/articulos?nombre=Bike`
            - Ejemplo: `http://localhost:3000/api/articulos?nombre=Bi`
            - Ejemplo: `http://localhost:3000/api/articulos?nombre=bike`
    
- Art√≠culos ordenador por:
    - skip = muestrame el resultado a partir de x
    - limit = muestrame x resultados
    - sort = ordename los resultados
    
    Las busquedas pueden estar concatenadas entre si.
            - Ejemplo: `http://localhost:3000/apiv1/anuncios?tag=mobile&venta=false&nombre=ip&precio=50-&start=0&limit=2&sort=precio`

- Lista de tags existentes. Muestra una lista de los tags existentes en la BD.  
`http://localhost:3000/api/articulos/tags`

- Creaci√≥n, modificaci√≥n y eliminaci√≥n de art√≠culos (Se debe tener encuenta el esquema y sus restricciones)  

- Puedes acceder a las im√°genes a trav√©s de la ruta images. `/images/<nombreimagen.jpg>`  
            - Ejemplo: `http://localhost:3000/images/bike.jpg`

### Esquema del art√≠culo ‚å®Ô∏è

- nombre: 
    - tipo: string
    - requerido: si
- venta:
    - tipo: booleano (true, false)
    - requerido: si
- precio: 
    - tipo: n√∫mero
    - requerido: si
- foto: 
    - tipo: n√∫mero
    - requerido: no

- tags: 
    - tipo: string
    - requerido: no
    - valores que se pueden introducir:
        - work
        - lifestyle
        - motor
        - mobile

## Autores ‚úíÔ∏è

* **Elisabet D'Acosta Almir√≥n** - (https://github.com/venganzaalchocolate)
